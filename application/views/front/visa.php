<style>
a.remove_button_specialities {
    font-size: 14px;
    color: #fff;
    font-weight: 500;
    background: #a38242;
    padding: 13px 0px;
    border-radius: 3px;
    width: 94%;
    text-align: center;
    height: fit-content;
}
a.add_button_specialities {
        text-align: left;
    font-size: 14px;
    color: #fff;
    font-weight: 500;
    background: #a38242;
    padding: 13px 20px;
    border-radius: 3px;

}

a.add_button_specialities i {color: #fff;}
.destinationText h6 {
    font-size: 15px;
    text-align: left;
    text-transform: capitalize;
    color: #000;
    font-weight: 500;
    margin: 0;
    line-height: 1.5;
    letter-spacing: 0;
}

.radio_btn_div {
    display: flex;
    align-items: center;
    padding-top: 4px;
}

.radio_btn_div div {
    padding-right: 20px;
    font-size: 14px;
}

.trvl-dest {
    padding-bottom: 30px;
}
div#visaMessage {
    /*margin-top: 22px;*/
    background: rgb(190, 163, 103);
    padding: 14px;
    color: #fff;
    border-radius: 10px;
    display: flex;
}

div#visaMessage p {
    align-content: center !important;
    margin-bottom: 0;
}

    div#response {
    margin-top: 20px;
    background: #A5823E;
    padding: 10px;
    color: #fff;
    border-radius: 10px;
    width: fit-content;
}

div#response:before {
    content: '\f058';
    font-family: 'Font Awesome 5 Free';
    margin-right: 10px;
}
.contact-form h4 {
    text-align: center;
    padding-bottom: 16px;
        color: #b97e2a;
            text-transform: uppercase;
}
.contact-form p {
    text-align: center;
}
.contact-form form button {
    width: 100%;
}
.contact-form form {
    width: 70%;
    margin: 50px auto 50px auto;
    background: #fff;
    box-shadow: 0 0 15px rgb(0 0 0 / 18%);
    padding: 30px 40px;
    border-radius: 20px;
}
.d_selection_visa {
    display: flex;
    align-items: center;
    padding-top: 4px;
}
.d_selection_visa .d_selection_inner {
    padding-right: 20px;
}
div#visaRadio > label {
    font-family: 'Proxima Nova';
    font-size: 15px;
}
.d_selection_inner label {
    font-size: 14px;
}
</style>
<section class="inner-banner" style=" background: url(<?php echo base_url(); ?>/assets/front/images/contact.jpg); ">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                        <h2>Visa</h2>
                        <ul>
                            <li><a href="<?php echo base_url();?>">Home</a></li>
                            <li><a href="JavaScript:;" class="active">Visa</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <!--<section class="contact-detail">-->
        <!--    <div class="container">-->
        <!--        <div class="row">-->
        <!--            <div class="col-12 col-md-12 col-sm-12 col-lg-4 col-xl-4 col-xxl-4">-->
        <!--                <h6><i class="fas fa-mobile-alt"></i></h6>-->
        <!--                <h4>phone</h4>-->
        <!--                <p><a href="tel:8007838472">(800) 783-8472</a></p>-->
        <!--            </div>-->
        <!--            <div class="col-12 col-md-12 col-sm-12 col-lg-4 col-xl-4 col-xxl-4">-->
        <!--                <h6><i class="fas fa-map-marker-alt"></i></h6>-->
        <!--                <h4>address</h4>-->
        <!--                <p><strong>DALLAS CORPORATE ADDRESS:</strong> 5301 Alpha Road, Suite 80-13 Dallas, TX 75240</p>-->
        <!--                <p><strong>DENVER ADDRESS:</strong> 44 Cook Street, Ste 100 Denver, CO 80206</p>-->
        <!--            </div>-->
        <!--            <div class="col-12 col-md-12 col-sm-12 col-lg-4 col-xl-4 col-xxl-4">-->
        <!--                <h6><i class="far fa-envelope"></i></h6>-->
        <!--                <h4>e-mail</h4>-->
        <!--                <p><a href="mailto:ray@rjrpv.com">ray@rjrpv.com</a></p>-->
        <!--            </div>-->
        <!--        </div>-->
        <!--    </div>-->
        <!--</section>-->
        <section class="contact-form">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                  
                        <h4>Need help navigating the visa process? Our team is here to assist you every step of the way. Whether you're unsure about which visa type suits your needs, need guidance on documentation, or have questions about the application process, we've got you covered. Get contacted now for expert assistance!</h4>
                        <p>We will do all we can to return your inquiry within 24 hours. You may also call our Toll Free number, we are open from 8:00am EST to 8pm CST 800 783-8472</p>
                             
                        <form>
                            <div class="row">
                                 <h6>LET'S TALK</h6>
                        <h2>Get in Touch</h2>
                                <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                                    <div class="custom-input">
                                        <input type="text" name="name" id="customer_name" placeholder="Name *">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                                    <div class="custom-input">
                                        <input type="email" name="email" id="email" placeholder="Email *">
                                    </div>
                                </div>
                                <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                                    <div class="custom-input">
                                        <input type="tel" name="phone" id="phone" placeholder="Phone *">
                                    </div>
                                </div>
                                <div class="row align-items-center">
                            <div class="col-4 col-md-4 col-sm-4 col-lg-4 col-xl-4 col-xxl-4 ">
    <div class="floating-field">
        
        <?php
        $query = $this->db->query("SELECT * FROM rjr_countries");
        $country_names = $query->result_array();
        if (!empty($country_names)):
            ?>
            <select name="countries_name[]" id="countries_name_id" class="form-control form-select">
                <option value="">Please Select</option>
                <?php foreach ($country_names as $country_name):
                    ?>
                    <option value="<?php echo $country_name['country_name']; ?>" data-country-id="<?php echo $country_name['id']; ?>" data-visa-required="<?php echo $country_name['visa_required']; ?>" class="flag-<?php echo strtolower($country_name['country_code']); ?>">
                        <?php
                        echo $country_name['country_name'];
                        ?>
                    </option>
                <?php endforeach; ?>
            </select>
        <?php else: ?>
            <p>No Country available.</p>
        <?php endif; ?>
        <label for="visa_select">Travel Destination</label>
    </div>
</div>

<div class="col-5 col-md-5 col-sm-5 col-lg-5 col-xl-5 col-xxl-5">
    <div id="visaRequirementContainer" class="col-12" style="display: none;">
        <div id="visaMessage" style="display: none;">
            <p>No visa is required for this country.</p>
        </div>
        <div id="visaRadio" style="display: none;">
            <label>Visa is required for <span id="countryName"></span>. Do you need assistance?</label>
            <div class="d_selection_visa">
                <div class="d_selection_inner">
                    <input type="radio" name="visa_assistance" value="" id="visa_yes" class="get_for_form">
                    <label for="visa_yes">Yes</label>
                </div>
                <div class="d_selection_inner">
                    <input type="radio" name="visa_assistance" value="No i don`t need assistance" id="visa_no">
                    <label for="visa_no">No</label>
                </div>
            </div>
        </div>
        <input type="hidden" name="visa_message" id="visa_message">
    </div>
</div>

<div class="col-3 col-md-3 col-sm-3 col-lg-3 col-xl-3 col-xxl-3 text-end">
    	<a href="javascript:void(0);" class="add_button_specialities" title="Add field"> <i class="fas fa-plus-circle"></i> Add Destination</a>
</div>
</div>
<div class="trvl-dest">
    
</div>

<script>
document.getElementById("countries_name_id").addEventListener("change", function () {

    var selectElement = this;
    var selectedOption = selectElement.options[selectElement.selectedIndex];
    var visaRequired = selectedOption.getAttribute("data-visa-required");
    var countryName = selectedOption.textContent;
    var visaRequirementContainer = document.getElementById("visaRequirementContainer");
    var visaMessage = document.getElementById("visaMessage");
    var visaRadio = document.getElementById("visaRadio");
    var countryNameSpan = document.getElementById("countryName");
    var visaYes = document.getElementById("visa_yes");
    var visaNo = document.getElementById("visa_no");
    var visaMessageHidden = document.getElementById("visa_message");

    if (visaRequired === "1") {
        visaRequirementContainer.style.display = "block";
        visaMessage.style.display = "none";
        visaRadio.style.display = "block";
        countryNameSpan.textContent = countryName;
        var assistanceMessage = `Visa is required for ${countryName}`;
        visaYes.value = "Yes i need assistance";
       
    } else {
        visaRequirementContainer.style.display = "block";
        visaMessage.style.display = "block";
        visaRadio.style.display = "none";
        visaMessageHidden.value = `No visa is required for ${countryName}.`;
    }
});
</script>

													</div>
													
                                <!--<div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">-->
                                <!--    <div class="custom-input">-->
                                <!--        <textarea placeholder="Message *" id="message"></textarea>-->
                                <!--    </div>-->
                                <!--</div>-->
                                <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                                    <button id="request-consultation">Submit</button>
                                </div>
                                <div class="col-12 col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xxl-12">
                                    <div style="display:none;" id="response"></div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" ></script>
<script type="text/javascript">

	$(document).ready(function(){
		var maxField = 10; // Maximum number of input fields
		var addButton = $('.add_button_specialities'); // Add button selector
		var wrapper = $('.trvl-dest'); // Input field wrapper
        var fieldCount =  1;
		// Function to fetch country data via AJAX
		function fetchCountryData() {
			$.ajax({
				url: '<?php echo base_url('get-all-countries') ;?>', // Replace with the actual path to your PHP script
				method: 'GET',
				dataType: 'json',
				success: function(response) {
					if (response && response.length > 0) {
						// Generate the select options based on the response data
						var selectOptions = '';
						var checkboxId; // Define checkboxId outside the loop

						$.each(response, function(index, country) {
						     var checkboxIndex = fieldCount;
							checkboxId = 'contact_me_' + checkboxIndex; 
							not_checkboxId = 'not_required_' + checkboxIndex; 
							selectOptions += '<option value="' + country.country_name + '" data-country-id="' + country.id + '" data-visa-required="' + country.visa_required + '" class="flag-' + country.country_code.toLowerCase() + '">' + country.country_name + '</option>';
						});

						var fieldHTML = `
							<div class="row mt-3 w-100">
	<div class="col-md-4">
		<div class="floating-field">
			<select name="countries_name[]" id="countries_name_id_2" class="form-control form-select countries_name_id_2">
				<option value="">Please Select</option>
				${selectOptions}
			</select>
			<label for="visa_select">Travel Destination</label>
		</div>
		
	</div>
	<div class="col-md-5">
		<div id="contactCheckbox_2" style="display: none;" class="contactCheckbox_2 contact_check">
			<div class="option_cont_div" id="main_div2">
				<div class="destinationText"><h6>Visa is required for this destination. Do you need assistance?</h6></div>
				<div class="radio_btn_div">
					<div>
						<input type="radio" name="${checkboxId}[]" id="${checkboxId}" class="contact_me_2 get_for_form">
						<label id="contact_me_label_2" for="${checkboxId}" class="contact_me_label_2"></label>
					</div>
					
					<div>
						
						<input type="radio" name="${checkboxId}[]" value="no" id="not_required">
						<label id="not_required_label" for="not_required_label">no</label>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="no_visa_message" style="display: none;"></div>
	</div>
	
	<div class="col-3 d-flex justify-content-end">
		<a href="javascript:void(0);" class="remove_button_specialities" title="Remove field"><i class="fas fa-trash"></i> Remove Destination</a>
	</div>
</div>
						`;


						$(wrapper).append(fieldHTML);
						document.addEventListener("change", function(event) {
							if (event.target.classList.contains("countries_name_id_2")) {
								var selectElement = event.target;
								var selectedOption = selectElement.options[selectElement.selectedIndex];
								var visaRequired = selectedOption.getAttribute("data-visa-required");
								var countryName = selectedOption.textContent;
                                var noVisaMessage = selectElement.closest(".row").querySelector(".no_visa_message");
								var contactCheckbox = selectElement.closest(".row").querySelector(".contactCheckbox_2");
								var contactCheckboxLabel = selectElement.closest(".row").querySelector(".contact_me_label_2");
								var contactmeCheckbox = contactCheckbox.querySelector(".contact_me_2");

								if (visaRequired === "1") {
									contactCheckbox.style.display = "flex";
										noVisaMessage.style.display = "none";
									contactCheckboxLabel.textContent = `Yes`;
									contactmeCheckbox.value = `Yes i need assistance`;

								} else if(visaRequired === "0") {
								    noVisaMessage.style.width = "fit-content";
    
									contactCheckbox.style.display = "none";
									contactmeCheckbox.value = ""; 
									noVisaMessage.style.backgroundColor = "#bea367";
                                noVisaMessage.style.padding = "14px";
                                noVisaMessage.style.width = "100%";
                                noVisaMessage.style.textAlign  = "center";
                                noVisaMessage.style.color = "#fff";
                                noVisaMessage.style.borderRadius = "6px";
                                noVisaMessage.style.display = "block";
                                noVisaMessage.textContent = `No visa is required for ${countryName}.`;
								}
							}
						});

                        fieldCount++;

					} else {
						console.log('No country data available.');
					}

				},
				error: function(xhr, status, error) {
					console.error('Error fetching country data:', error);
				}
			});
		}

		// Add button click event handler
		$(addButton).click(function(){
			// Check maximum number of input fields
			if ($(wrapper).find('.row').length < maxField) {
				// Call the fetchCountryData function to append another set of fields
				fetchCountryData();
			}
		});

		// Remove button click event handler
		$(wrapper).on('click', '.remove_button_specialities', function(e){
			e.preventDefault();
			$(this).closest('.row').remove(); // Remove the closest parent row
		});

	});

</script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
jQuery('#request-consultation').click(function (e) {
    e.preventDefault();
    
    


     var countries_assistance = [];
    var customer_name = $('#customer_name').val();
    var email = $('#email').val();
    var phone = $('#phone').val();
    var requirement = $('input[name="visa_assistance"]:checked').val();
        

     jQuery('select[name="countries_name[]"]').each(function() {
        var country_name = $(this).find('option:selected').val();
        var assistance = $(this).closest('.row').find('input.get_for_form:checked').val();
        if (country_name) {
            countries_assistance.push({
                country_name: country_name,
                assistance: assistance || "No i don`t assistance" 
            });
        }
    });

    if (customer_name === '' || email === '' || phone === '' || countries_name_id === '' || requirement === '') {
        alert('Please fill in all fields.');
        return; // Prevent further execution
    }

  var send_email_data = {
        customer_name: customer_name,
        get_email: email,
        phone: phone,
        countries_assistance: countries_assistance,
      
    };
   

    $.ajax({
        url: '<?php echo base_url('visa-ask-email');?>',
        method: 'post',
        data: send_email_data,
        dataType: 'json',
        timeout: 2000,
        success: function (response) {
              $('#response').show();
              $('#response').text(response.message);
            setTimeout(function() {
                $('#response').hide();
            }, 3000); // 2000 milliseconds = 2 seconds
        },
        error: function (error) {
            console.error("Error in AJAX request:", error);
        }
    });
});

</script>
